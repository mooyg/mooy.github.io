---
import { Button } from "@components/ui/Button";
import { Sun, Moon } from "@medusajs/icons";
const { theme } = Astro.props;
---

<theme-toggle data-theme={theme}>
  <Button id="theme" data-theme={theme}>
    {theme === "dark" ? <Sun /> : <Moon />}
  </Button>
</theme-toggle>

<script>
  import { getTheme, toggleTheme } from "@scripts/theme";
  class ThemeToggle extends HTMLElement {
    constructor() {
      super();
      this.dataset.theme = getTheme();
      const button = this.querySelector("button");
      button.addEventListener("click", toggleTheme);
    }
  }
  customElements.define("theme-toggle", ThemeToggle);
</script>
